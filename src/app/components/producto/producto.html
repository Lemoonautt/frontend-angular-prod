<!-- HTML -->
<div class="content-wrapper">
  <div class="form-container">
    <h2>Crear Nuevo Producto</h2>

    <form (ngSubmit)="onSubmit()" class="product-form">
      <div class="form-group">
        <label for="nombre">Nombre del Producto:</label>
        <input
          type="text"
          id="nombre"
          name="nombre"
          [(ngModel)]="producto.nombre"
          required
          class="form-control"
          placeholder="Ingresa el nombre del producto">
      </div>

      <div class="form-group">
        <label for="precio">Precio:</label>
        <input
          type="number"
          id="precio"
          name="precio"
          [(ngModel)]="producto.precio"
          required
          min="0"
          step="0.01"
          class="form-control"
          placeholder="0.00">
      </div>

      <div class="form-group">
        <label for="categoria">Categor√≠a:</label>
        <select
          id="categoria"
          name="categoria_id"
          [(ngModel)]="producto.categoria_id"
          class="form-control">
          <option value="">Selecciona una categor√≠a</option>
          <option *ngFor="let cat of categorias" [value]="cat.id">
            {{ cat.nombre }}
          </option>
        </select>

        <div *ngIf="loadingCategorias" class="loading-categorias">
          Cargando categor√≠as...
        </div>
      </div>

      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="loading">
        <span *ngIf="!loading">Crear Producto</span>
        <span *ngIf="loading">Enviando...</span>
      </button>
    </form>

    <div *ngIf="loading" class="loading">
      <p>‚è≥ Enviando producto al servidor...</p>
    </div>

    <div *ngIf="submitted" class="success-message">
      <h3>¬°PRODUCTO CREADO EXITOSAMENTE!</h3>
    </div>
  </div>

  <div class="products-container">
    <h2>Lista de Productos</h2>

    <div *ngIf="loadingList" class="loading">
      <p>‚è≥ Cargando productos...</p>
    </div>

    <div *ngIf="!loadingList && productos.length === 0" class="no-products">
      <p>No hay productos en la base de datos.</p>
      <p class="hint">üí° Crea un producto usando el formulario</p>
    </div>

    <div *ngIf="!loadingList && productos.length > 0" class="products-table">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Categor√≠a</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let prod of productos">
            <td>{{ prod.id }}</td>
            <td>{{ prod.nombre }}</td>
            <td>{{ formatearPrecio(prod.precio) }}</td>
            <td>{{ prod.categoria?.nombre || 'Sin categor√≠a' }}</td>
          </tr>
        </tbody>
      </table>

      <p class="total">Total de productos: {{ productos.length }}</p>
    </div>
  </div>
</div>

